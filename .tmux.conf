# Credit:
#   Junegunn Choi       <https://github.com/junegunn/dotfiles>
unbind c-b
set -g prefix c-a
bind a send-prefix

# Index starts from 1
set -g base-index 1
set -g pane-base-index 1


# Renumber windows when a window is closed
set -g renumber-windows on

set -g history-limit 102400

set -g repeat-time 500

set -g default-terminal "screen-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

set -g mouse on

setw -g mode-keys vi

bind c-a last-window
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -c "#{pane_current_path}"

bind -r > swap-window -d -t :+
bind -r < swap-window -d -t :-

bind bspace previous-window
bind space  next-window
bind / next-layout # Override

bind * setw synchronize-pane

# Reload
bind R source-file ~/.tmux.conf \; display-message "Reloaded!"

# Completion
bind t run-shell 'tmux send-keys -t #{pane_id} "$(tmux-fzf-words)"'
bind T run-shell 'tmux send-keys -t #{pane_id} "$(tmux-fzf-word --all)"'

bind h select-pane -L
bind l select-pane -R
bind j select-pane -D
bind k select-pane -U
bind tab select-pane -t :.+
bind btab select-pane -t :.-

bind-key -T copy-mode-vi y send -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"
bind-key y send-keys C-l C-a \; run-shell 'sleep 0.25' \;\
  copy-mode \; send-keys -X begin-selection \;\
  send-keys -X -N 100 'cursor-down' \;\
  send-keys -X 'end-of-line' \;\
  send-keys -X 'previous-word' \;\
  send-keys -X 'next-word-end' \;\
  send-keys -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy" \;\
  send-keys C-e \;\
  display-message "Line copied"


bind C-l send C-l \; clear-history
